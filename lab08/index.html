<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
  <meta charset="utf-8">
  <title>Lab 8</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@900&display=swap');

    h1,
    div {
      background-color: rgba(255, 255, 0, 0.1);
      font-family: 'Noto Serif JP', serif;
      font-size: 24pt;
      border: solid 1px black;
      width: 90%;
      margin: 5px auto;
      padding: 10px;
    }

    div {
      font-size: 12pt;
    }

    body {
      background-color: rgba(255, 128, 255, 0.1);
    }

    video:hover {
      box-shadow: 0 0 1px 1px rgba(255, 140, 186, 0.5);
    }

    .path {
      stroke-dasharray: 1000;
      stroke-dashoffset: 1000;
      animation: dash 7s linear forwards;
    }

    @keyframes dash {
      to {
        stroke-dashoffset: 0;
      }
    }
  </style>
  <script src="https://d3js.org/d3.v6.min.js" charset="utf-8"></script> <!-- v6.5.0 -->
</head>

<body>
  <h1>
    lab08 漢字書寫 (鉛筆字) (毛筆字也OK!) Path Animation
  </h1>
  <div>
    限定使用 D3.js，參考以下影片。
    <ul>
      <li><a href="https://bl.ocks.org/basilesimon/f164aec5758d16d51d248e41af5428e4">Animate path in D3</a></li>
      <li><a href="https://codepen.io/MyXoToD/post/howto-self-drawing-svg-animation">"Self-Drawing" SVG</a></li>
      <li><a href="https://stackoverflow.com/questions/15275362/how-to-transition-a-path-in-d3-js">How to transition a
          path in d3.js</a></li>
      <li><a href="https://css-tricks.com/svg-line-animation-works/">How SVG Line Animation Works</a></li>
      <li><a href="http://blog.roachking.net/blog/2014/10/31/osolve-team-drawing-animation/">使用 SVG 將圖片做成動畫</a></li>
      <li><a href="https://www.hesyifei.com/">何一非</a></li>
    </ul>
  </div>

  <div>
    <video width="400" controls loop autoplay>
      <source src="3.mp4" type="video/mp4">
    </video>
  </div>
  <div>
    展示區 (姓名)
    <hr>
    <img width="256" src="./LIN.svg">
    <img width="256" src="./PO.svg">
    <img width="256" src="./JEN.svg">
  </div>

  <div>手寫動畫區 (姓名)
    <hr>
    <svg id="svg1" height="350" width="300">
    </svg>
    <svg id="svg2" height="350" width="300">
    </svg>
    <svg id="svg3" height="350" width="300">
    </svg>
  </div>

  <!--
    <div>
      Drag and Drop 展示區 (接收任何SVG)
      <hr>
    </div>
-->

  <script type="text/javascript">
    var line = d3.line();


    var first = [
      "m 28.002902,94.152883 c 4.849915,0.953735 9.77747,1.399206 14.684356,1.939393 10.357239,1.140201 -1.130546,-0.0704 9.658583,1.050951 4.581485,0.43882 9.169654,0.796497 13.759568,1.132301 0,0 2.924742,-2.094564 2.924742,-2.094564 v 0 C 64.417389,95.886806 59.80481,95.580614 55.205674,95.111011 47.821378,94.320666 52.732146,94.85713 45.565811,94.048333 40.771984,93.507297 35.943632,93.055931 31.242402,91.925864 c 0,0 -3.2395,2.227019 -3.2395,2.227019 z",
      "m 54.632126,78.461194 c 0.523783,4.530024 0.318538,9.081098 0.07868,13.620745 -0.229632,3.940177 -0.735491,7.844086 -1.832824,11.641621 -0.683789,2.36639 -1.099987,3.34278 -1.972281,5.68448 -2.217692,6.47589 -3.993459,13.09371 -5.133382,19.84636 -0.213709,1.26597 -0.373571,2.54045 -0.560356,3.81067 -0.135215,1.16484 -0.285255,2.32806 -0.405646,3.49453 -0.258273,2.50242 -0.354997,3.64891 -0.361836,6.14309 -0.0075,2.73789 0.223734,5.44848 0.492702,8.16946 0.339709,3.6601 1.095404,7.26968 1.464691,10.92449 -0.063,0.0875 -0.12599,0.17508 -0.188982,0.26261 0,0 3.593164,-1.67737 3.593164,-1.67737 v 0 c 0.01603,-0.1325 0.03208,-0.265 0.04812,-0.39751 -0.519589,-3.61759 -1.2276,-7.20844 -1.593461,-10.84825 -0.233788,-2.24027 -0.34073,-2.95414 -0.442222,-5.24642 -0.183975,-4.15525 0.09344,-8.30152 0.643692,-12.42181 0.500906,-3.4597 0.569772,-4.28027 1.280138,-7.7524 1.103789,-5.3951 2.664691,-10.67737 4.508744,-15.8641 1.060511,-2.83586 2.077201,-5.65984 2.713667,-8.628792 0.436819,-2.037654 0.597339,-3.642119 0.792996,-5.71582 0.09694,-1.027451 0.170124,-2.057005 0.255188,-3.085507 0.240943,-4.583081 0.432501,-9.167386 0.139758,-13.753888 0,0 -3.520554,1.793811 -3.520554,1.793811 z",
      "m 51.625065,101.50672 c -0.197355,0.23829 -0.386603,0.48354 -0.592068,0.71487 -1.896682,2.1355 -0.279882,0.14443 -2.553341,2.90494 -2.071631,2.51545 -4.00182,5.13028 -5.931355,7.75489 -2.571387,3.47031 -5.189815,6.90453 -7.803861,10.3426 0,0 3.443806,-1.48348 3.443806,-1.48348 v 0 c 2.560442,-3.44126 5.136401,-6.87098 7.707532,-10.30427 2.959396,-3.97494 5.935374,-7.88497 9.371094,-11.466515 0,0 -3.641807,1.536965 -3.641807,1.536965 z",
      "m 55.059802,104.47132 c 2.143273,2.73382 3.614557,5.89864 5.072282,9.02877 1.433525,3.27026 2.910723,6.52094 4.356854,9.78555 0,0 3.386386,-1.91135 3.386386,-1.91135 v 0 c -1.503826,-3.2347 -3.058414,-6.44578 -4.473308,-9.72134 -1.434592,-3.18303 -2.894169,-6.36652 -4.957487,-9.20462 0,0 -3.384727,2.02299 -3.384727,2.02299 z",
      "m 95.419988,95.892653 c 7.325452,-0.410816 14.542932,-1.851496 21.770832,-3.033046 4.58905,-0.758782 9.20962,-1.300982 13.82533,-1.864931 0,0 2.79449,-2.082078 2.79449,-2.082078 v 0 c -4.59033,0.54769 -9.1982,0.999586 -13.75478,1.793121 -7.11568,1.180759 -14.23332,2.636081 -21.460792,2.880106 0,0 -3.17508,2.306828 -3.17508,2.306828 z",
      "m 117.79359,75.497565 c 0.0469,2.593321 0.0414,5.187182 0.0422,7.780813 0.0485,3.302117 -0.1054,6.601333 -0.2211,9.900433 -0.13925,3.737129 -0.45556,7.463589 -0.92685,11.172659 -0.77539,7.59451 -0.68824,15.24557 -0.45097,22.86512 0.29465,6.98859 1.16205,13.93089 2.16911,20.84663 0.22972,1.7447 0.51729,3.48639 0.66393,5.24139 0.0868,1.03823 0.10859,0.76341 -0.0185,1.4318 0,0 3.54346,-1.77235 3.54346,-1.77235 v 0 c -0.0782,-2.23847 -0.56693,-4.4448 -0.86741,-6.65775 -1.11788,-6.85856 -2.01777,-13.75907 -2.34036,-20.70654 -0.21241,-7.64354 -0.23665,-15.32403 0.70028,-22.92644 0.47764,-3.727176 0.81721,-7.466583 0.94883,-11.223536 0.10431,-3.306136 0.27997,-6.611382 0.23181,-9.920216 8e-4,-2.607966 -0.004,-5.216152 0.0422,-7.823814 0,0 -3.51661,1.791801 -3.51661,1.791801 z",
      "m 112.81409,98.90613 c -2.60558,2.21157 -4.97439,4.68274 -7.35942,7.12585 -2.79834,3.10653 -5.795504,6.01874 -8.769344,8.95401 0,0 3.550194,-1.46903 3.550194,-1.46903 v 0 c 2.94293,-2.93893 5.9051,-5.85841 8.70746,-8.93392 2.43233,-2.47023 4.8658,-4.944604 7.51448,-7.18604 0,0 -3.64337,1.50913 -3.64337,1.50913 z",
      "m 120.05001,100.29018 c 0.22753,0.28546 0.46601,0.56252 0.68258,0.85639 1.67839,2.27746 3.20887,4.6471 4.93015,6.89684 1.69957,2.22136 3.59571,4.52653 5.35796,6.69827 2.07416,2.5185 4.06004,5.10629 6.02217,7.71213 0,0 3.21215,-1.91186 3.21215,-1.91186 v 0 c -2.02509,-2.56999 -4.07665,-5.1184 -6.16361,-7.63862 -2.16938,-2.66944 -3.25315,-3.93982 -5.29836,-6.70993 -1.68499,-2.28221 -3.14229,-4.67985 -4.71401,-7.034198 -0.20255,-0.303419 -0.42412,-0.593704 -0.63618,-0.890559 0,0 -3.39285,2.021537 -3.39285,2.021537 z"
    ]

    var middle = [
      "m 34.562954,89.124262 c 1.972607,-0.02935 2.193761,-0.03529 4.440098,-0.05373 1.162565,-0.0096 2.32528,-0.04119 3.487742,-0.02294 4.560462,0.07157 9.109361,0.437211 13.657911,0.743654 4.100422,0.293113 8.202051,0.565891 12.315055,0.551855 2.34592,-0.008 3.747198,-0.09538 6.038135,-0.201928 0,0 3.002405,-2.205691 3.002405,-2.205691 v 0 c -2.230472,0.131847 -3.83431,0.249727 -6.105208,0.279162 -4.130415,0.05354 -8.253169,-0.19748 -12.371342,-0.485497 -4.520068,-0.308713 -9.046763,-0.6951 -13.57653,-0.83243 -1.141029,-0.03459 -2.283071,-0.01336 -3.424584,-0.02294 -2.190562,-0.01839 -2.379374,-0.02405 -4.29219,-0.05373 0,0 -3.171492,2.304225 -3.171492,2.304225 z",
      "m 59.533292,73.881601 c 0.176932,6.567987 0.01855,13.138909 -0.263681,19.701197 -0.421135,7.923582 -0.863751,15.862002 -1.829565,23.742462 -0.17163,1.4004 -0.394308,2.79407 -0.59146,4.19111 -1.406427,8.61736 -3.665035,17.0763 -6.139159,25.44157 -0.892879,2.86512 -1.788147,5.73118 -2.75609,8.57215 -0.69092,2.02788 -0.361032,1.3373 -1.166344,2.7144 0,0 3.556661,-1.60235 3.556661,-1.60235 v 0 c 0.649483,-1.42328 0.354526,-0.68765 1.000601,-2.70861 0.906375,-2.83518 1.797143,-5.67589 2.641545,-8.53019 2.382932,-8.39484 4.663551,-16.8498 6.077034,-25.46918 0.191521,-1.39908 0.409155,-2.79484 0.574569,-4.19726 0.930373,-7.88788 1.293114,-15.831446 1.805594,-23.752693 0.324382,-6.623452 0.480009,-13.251936 0.583202,-19.882331 0,0 -3.492907,1.779725 -3.492907,1.779725 z",
      "m 59.306282,100.52984 c -2.132341,3.97166 -4.456726,7.83878 -6.911872,11.61819 -1.751007,2.41115 -3.275814,4.99546 -5.111094,7.34621 -0.879395,1.12639 -1.128318,1.34545 -2.069081,2.33831 0,0 3.560083,-1.4905 3.560083,-1.4905 v 0 c 0.886145,-0.97783 1.187585,-1.27155 2.01981,-2.36844 1.788105,-2.35676 3.283635,-4.92901 5.015982,-7.32532 2.487644,-3.84676 4.846137,-7.77974 7.08334,-11.777466 0,0 -3.587168,1.659016 -3.587168,1.659016 z",
      "m 117.80231,78.073892 c -6.0027,1.806567 -11.83324,4.135337 -17.54287,6.713416 -1.550496,0.700098 -3.126828,1.354428 -4.616728,2.175626 -2.325897,1.28198 -4.543967,2.750532 -6.81595,4.125796 -2.103842,2.46402 -3.599063,3.683778 -4.573082,6.865006 -0.929793,3.036784 -0.780836,6.950144 -0.589544,10.013164 0.20706,3.31549 1.094348,10.12302 1.482846,13.29543 1.143744,9.32012 2.313734,18.63791 3.310771,27.97516 0.150458,0.29367 0.300913,0.58733 0.451371,0.88099 0,0 3.380746,-1.96527 3.380746,-1.96527 v 0 c -0.167638,-0.22139 -0.335278,-0.44277 -0.502918,-0.66416 -1.311306,-9.24393 -2.55085,-18.49813 -3.711839,-27.76215 -0.395415,-3.50099 -1.163172,-9.71793 -1.328526,-13.33447 -0.14219,-3.10995 -0.202798,-6.874022 0.792559,-9.923218 1.035344,-3.171701 2.442171,-4.233198 4.604285,-6.668691 2.015789,-1.738458 0.723011,-0.740886 5.418672,-2.879045 5.565557,-2.534263 11.257497,-4.836683 17.159367,-6.467056 0,0 3.08084,-2.380528 3.08084,-2.380528 z",
      "m 87.124507,99.171476 c 7.215767,-1.617568 14.480573,-3.07757 21.817403,-4.037 1.19951,-0.156858 2.40612,-0.253449 3.60919,-0.380174 0.91288,0.150389 1.88135,0.103275 2.73863,0.45117 2.21907,0.900531 3.18437,2.806121 4.16551,4.872238 2.37562,5.00273 3.38379,10.51044 4.51423,15.88061 1.44998,7.13878 2.41548,14.36062 3.37336,21.57774 0,0 3.30065,-1.74306 3.30065,-1.74306 v 0 c -1.16135,-7.15923 -2.24309,-14.33329 -3.66343,-21.44758 -1.1234,-5.41884 -2.11968,-10.98221 -4.39892,-16.072784 -0.99466,-2.221513 -1.89429,-4.213088 -4.24605,-5.203592 -0.89236,-0.375841 -1.90935,-0.323472 -2.86402,-0.485206 -1.22862,0.139223 -2.46085,0.249578 -3.68585,0.417671 -7.22118,0.99088 -14.373817,2.421908 -21.526375,3.802761 0,0 -3.134328,2.367206 -3.134328,2.367206 z",
      "m 95.355716,125.35384 c 5.793584,-1.44265 11.683244,-2.44222 17.583894,-3.32455 0,0 2.8374,-2.12551 2.8374,-2.12551 v 0 c -5.80826,0.8406 -11.5978,1.81411 -17.329929,3.08122 0,0 -3.091365,2.36884 -3.091365,2.36884 z",
      "m 98.926215,145.60434 c 7.269915,-2.15077 14.615475,-4.0394 21.948625,-5.96134 0,0 2.91598,-2.2362 2.91598,-2.2362 v 0 c -7.2632,1.94428 -14.53227,3.86628 -21.78739,5.84028 0,0 -3.077215,2.35726 -3.077215,2.35726 z"
    ]

    var last = [
      "m 71.810673,66.290149 c 0.484682,-0.281458 1.947473,-1.110215 1.454049,-0.844375 -4.587798,2.471748 -3.069389,1.865516 -8.382968,4.445323 -6.245886,3.032456 -12.631346,5.786853 -18.975652,8.604289 -6.576716,2.900321 -3.45454,1.535534 -9.3639,4.100362 0,0 -2.780454,2.200815 -2.780454,2.200815 v 0 c 6.019213,-2.653297 2.844139,-1.246722 9.523378,-4.223877 10.894941,-4.859301 21.967251,-9.449073 32.161229,-15.705077 0,0 -3.635682,1.42254 -3.635682,1.42254 z",
      "m 56.513848,78.881109 c 0.213643,8.167145 0.100005,16.354896 -0.342146,24.513551 -0.139292,2.57023 -0.351663,5.13597 -0.527497,7.70396 -1.096867,12.06905 -2.875539,24.08909 -5.408165,35.94191 0,0 3.336462,-1.62322 3.336462,-1.62322 v 0 c 1.88572,-11.88858 4.037676,-23.75262 4.966822,-35.76867 0.180652,-2.57357 0.390924,-5.14523 0.541962,-7.72071 0.321273,-5.478369 0.388546,-8.996655 0.601715,-14.421253 0.07178,-1.826668 0.174786,-3.652092 0.236874,-5.479114 0.05592,-1.645547 0.02833,-3.293305 0.110579,-4.938254 0,0 -3.516606,1.7918 -3.516606,1.7918 z",
      "m 138.38888,66.425513 c -1.00547,0.269698 -2.00439,0.565137 -3.01641,0.809093 -6.90533,1.664584 -13.91392,2.871965 -20.89447,4.166264 -10.59964,1.96533 -5.78341,1.080437 -15.786277,2.901283 0,0 -2.59574,1.959372 -2.59574,1.959372 v 0 c 4.580037,-0.858919 11.353147,-2.134626 15.856487,-2.955242 7.79871,-1.421109 15.65096,-2.631683 23.35698,-4.512344 0,0 3.07943,-2.368426 3.07943,-2.368426 z",
      "m 86.504467,100.07935 c 1.287208,-0.165483 2.570281,-0.367148 3.861628,-0.496445 15.326715,-1.534615 30.716875,-2.134639 46.115275,-2.184376 3.56967,-0.01154 7.13925,0.04372 10.70888,0.06558 10.52539,0.149257 5.64112,0.0992 14.65263,0.165635 0,0 2.73453,-1.988182 2.73453,-1.988182 v 0 c -9.24972,0.1286 -4.24636,0.08666 -15.01031,0.09627 -8.24022,0.02241 -15.03163,0.0031 -23.3404,0.194 -10.15917,0.23336 -14.60106,0.480989 -24.5523,1.011817 -2.800925,0.14941 -5.60318,0.280241 -8.401241,0.476062 -1.244949,0.08713 -2.483596,0.248409 -3.725394,0.372615 0,0 -3.043298,2.287014 -3.043298,2.287014 z",
      "m 120.0381,78.244868 c 2.44706,6.437935 4.37574,13.079188 5.76705,19.825309 0.48125,2.333463 0.85989,4.686913 1.28984,7.030363 1.32443,8.84773 0.73451,4.54985 1.78812,12.89109 0,0 3.00827,-1.58316 3.00827,-1.58316 v 0 c -1.15712,-8.30508 -0.53137,-4.01965 -1.88873,-12.85461 -0.40813,-2.36097 -0.76553,-4.731272 -1.22439,-7.082904 -1.32827,-6.807314 -3.14023,-13.521465 -5.32349,-20.1017 0,0 -3.41667,1.875612 -3.41667,1.875612 z",
      "m 104.53623,131.39328 c 8.2753,2.59453 16.94507,3.59832 25.52297,4.65621 2.45543,0.26518 4.91107,0.52845 7.36678,0.7911 0,0 3.10315,-2.20878 3.10315,-2.20878 v 0 c -2.50371,-0.22134 -5.00635,-0.45392 -7.5095,-0.68148 -8.50714,-0.92256 -17.13555,-1.84831 -25.25779,-4.67939 0,0 -3.22561,2.12234 -3.22561,2.12234 z"
    ]

    const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
    async function first_N() {
      for (var i = 0; i < first.length; i++) {
        d3.select("#svg1")
          .append('path')
          .attr('class', 'path')
          .attr('fill', "none")
          .attr('stroke', "#008844")
          .attr('stroke-width', "5")
          .attr('stroke-linejoin', "miter")
          .attr('stroke-linecap', "butt")
          .attr('d', first[i]);
        console.log(i);
        await sleep(500);
      }
    }
    first_N()

    async function middle_N() {
      for (var j = 0; j < middle.length; j++) {
        d3.select("#svg2")
          .append('path')
          .attr('class', 'path')
          .attr('fill', "none")
          .attr('stroke', "#008844")
          .attr('stroke-width', "5")
          .attr('stroke-linejoin', "miter")
          .attr('stroke-linecap', "butt")
          .attr('d', middle[j]);
        console.log(j);
        await sleep(500);
      }
    }
    middle_N()

    async function last_N() {
      for (var k = 0; k < last.length; k++) {
        d3.select("#svg3")
          .append('path')
          .attr('class', 'path')
          .attr('fill', "none")
          .attr('stroke', "#008844")
          .attr('stroke-width', "5")
          .attr('stroke-linejoin', "miter")
          .attr('stroke-linecap', "butt")
          .attr('d', last[k]);
        console.log(k);
        await sleep(500);
      }
    }
    last_N()

  </script>

</html>